JuicyFox Bot Platform ü¶ä
JuicyFox ‚Äî —ç—Ç–æ white-label –±–æ—Ç-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è NSFW-–ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤.
–û–Ω–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ü–ª–∞–Ω A ‚Äî –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –µ–¥–∏–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π, –ø–æ–¥–ø–∏—Å–æ–∫, –∏—Å—Ç–æ—Ä–∏–∏ –∏ –ø–æ—Å—Ç–∏–Ω–≥–∞.
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω—ã–π —Ä–µ–∂–∏–º, —Ç–∞–∫ –∏ —Å–±–æ—Ä–∫—É –≤ –º–æ–Ω–æ–ª–∏—Ç (juicyfox_bot_single.py) –¥–ª—è —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è.
üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-org/juicyfox_bot.git
cd juicyfox_bot
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω .env.example:
cp .env.example .env
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Å–≤–æ–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
TELEGRAM_TOKEN ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞;
VIP_CHANNEL_ID, CHAT_GROUP_ID, LIFE_CHANNEL_ID –∏ –¥—Ä. ‚Äî ID –∫–∞–Ω–∞–ª–æ–≤ –∏ –≥—Ä—É–ø–ø;
CRYPTOBOT_TOKEN ‚Äî —Ç–æ–∫–µ–Ω –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (CryptoBot);
DB_PATH ‚Äî –ø—É—Ç—å –∫ SQLite –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /app/data/juicyfox.sqlite).
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ª–æ–∫–∞–ª—å–Ω–æ)
pip install -r requirements.txt
–ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ Docker-–æ–±—Ä–∞–∑:
docker compose build
4. –ó–∞–ø—É—Å–∫
–ó–∞–ø—É—Å—Ç–∏—Ç—å API –∏ –≤–æ—Ä–∫–µ—Ä—ã –º–æ–∂–Ω–æ —Ç–∞–∫:
docker compose up -d
–ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
# API (FastAPI + aiogram webhook)
uvicorn apps.bot_core.main:app --host 0.0.0.0 --port 8000

# Worker –¥–ª—è –ø–æ—Å—Ç–∏–Ω–≥–∞
python worker_posting.py
üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –º–æ–¥—É–ª–∏
ui_membership ‚Äî –º–µ–Ω—é, –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏.
payments ‚Äî —Å–µ—Ä–≤–∏—Å –∏–Ω–≤–æ–π—Å–æ–≤ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–æ–≤.
posting ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –≤–æ—Ä–∫–µ—Ä –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.
chat_relay ‚Äî –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É –∏ –æ—Ç–≤–µ—Ç—ã.
history ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å–∫ –≤–æ–∑–º–æ–∂–µ–Ω –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ Docker Compose.
–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ .env.
–î–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:
—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏—é .env —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BOT_ID, TELEGRAM_TOKEN);
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π volume –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
üì¶ –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ä–µ–∂–∏–º
–î–ª—è —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç:
python scripts/build_single.py
–û–Ω —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª juicyfox_bot_single.py, –≤–∫–ª—é—á–∞—é—â–∏–π –≤—Å–µ –º–æ–¥—É–ª–∏.
–ó–∞–ø—É—Å–∫:
# API-—Ä–µ–∂–∏–º
RUN_MODE=api python juicyfox_bot_single.py

# Worker-—Ä–µ–∂–∏–º
RUN_MODE=worker python juicyfox_bot_single.py
üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite:
/app/data/juicyfox.sqlite
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ PostgreSQL —á–µ—Ä–µ–∑ Alembic-–º–∏–≥—Ä–∞—Ü–∏–∏ (–≤ –±—É–¥—É—â–µ–º).
üõ†Ô∏è –ü–ª–∞–Ω A vs –ú–æ–Ω–æ–ª–∏—Ç
Plan A (–º–æ–¥—É–ª—å–Ω—ã–π —Ä–µ–∂–∏–º): –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker Compose.
–ú–æ–Ω–æ–ª–∏—Ç: –≤—Å—ë —Å–æ–±—Ä–∞–Ω–æ –≤ juicyfox_bot_single.py, —É–¥–æ–±–Ω–æ –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –º–æ–¥—É–ª–∏

- **ui_membership** ‚Äî –º–µ–Ω—é, –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏.
- **payments** ‚Äî —Å–µ—Ä–≤–∏—Å –∏–Ω–≤–æ–π—Å–æ–≤ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–æ–≤.
- **posting** ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –≤–æ—Ä–∫–µ—Ä –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.
- **chat_relay** ‚Äî –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É –∏ –æ—Ç–≤–µ—Ç—ã.
- **history** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### üìÇ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```plaintext
juicyfox/
‚îú‚îÄ api/
‚îÇ  ‚îú‚îÄ webhook.py           # POST /bot/{bot_id}/webhook ‚Üí aiogram Dispatcher
‚îÇ  ‚îú‚îÄ payments.py          # POST /payments/<provider> ‚Üí normalize ‚Üí events
‚îÇ  ‚îî‚îÄ health.py            # /healthz, /readyz (–∏ –æ–ø—Ü. /metrics)
‚îÇ
‚îú‚îÄ apps/
‚îÇ  ‚îî‚îÄ bot_core/
‚îÇ      ‚îú‚îÄ main.py          # –∑–∞–ø—É—Å–∫ FastAPI/uvicorn, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bot/DP
‚îÇ      ‚îú‚îÄ routers.py       # include_router(ui, posting, chat_relay, ‚Ä¶)
‚îÇ      ‚îú‚îÄ state.py         # FSM: Post, Donate, ChatGift
‚îÇ      ‚îî‚îÄ middleware.py    # –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, rate-limit, error handler, tracing
‚îÇ
‚îú‚îÄ modules/
‚îÇ  ‚îú‚îÄ ui_membership/       # /start, –º–µ–Ω—é, –¥–æ–Ω–∞—Ç, VIP/—á–∞—Ç
‚îÇ  ‚îú‚îÄ payments/            # —Å–µ—Ä–≤–∏—Å –∏–Ω–≤–æ–π—Å–æ–≤, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ  ‚îú‚îÄ posting/             # –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ worker –¥–ª—è –ø–æ—Å—Ç–∏–Ω–≥–∞
‚îÇ  ‚îú‚îÄ chat_relay/          # –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø—É
‚îÇ  ‚îî‚îÄ history/             # –∞—Ä—Ö–∏–≤/–ª–æ–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ
‚îú‚îÄ shared/
‚îÇ  ‚îú‚îÄ config/              # .env + YAML, –∞–ª–∏–∞—Å—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ  ‚îú‚îÄ db/                  # repo, migrations (Alembic)
‚îÇ  ‚îî‚îÄ utils/               # logging, time, idempotency, metrics
‚îÇ
‚îú‚îÄ configs/                # sample_bot.yaml
‚îú‚îÄ scripts/                # provisioner.py, build_single.py, seed_demo.py
‚îú‚îÄ worker_posting.py       # entrypoint: posting.worker
‚îú‚îÄ docker/                 # Dockerfile, compose.yaml
‚îú‚îÄ .env.example
‚îú‚îÄ requirements.txt
‚îú‚îÄ README.md
‚îî‚îÄ alembic.ini
